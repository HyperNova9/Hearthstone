<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		.enemy{
			margin-top: 100px;
			text-align:center;
			height: 250px;
		}
		.player_img{
			width:200px;
			height: 300px;
			background-size: 100% 100%;
			position: absolute;
			transition: 1s;
		}
		.enemy_img{
			width:200px;
			height: 300px;
			background-size: 100% 100%;
			position: absolute;
			transition: 1s;

		}
		.player{
			text-align: center;
			height: 250px;
			margin-top: 150px;

		}
		.player_property{
			position: absolute;
			top:80%;

		}
		.timer {
			position:absolute;
			background:red;
			width:0px;
			height:20px;
			left:0px;
			top:0px;
		}
		.enemy_name{
			color: white; font-family: Arial;
		}
		.player_name{
			color: white; font-family: Arial
		}
		.card {
			width:200px;
			height:300px;
			background-image:url(heart.png);
			background-size:100% 100%;
			position:absolute;
		}
	</style>
</head>
<body style="background-image: url(images/bg.jpg); background-size: 100% ">
	<div class="card" style="left:90%; top:65%">
		
	</div>
	<div class="timer">
	
	</div>
	<div class="enemy" style="transition:1s">
		<h1 class="enemy_name">Враг</h1>
	<div style="display:flex">
		<div class="enemy_img" style="left:90%; top:65%">
			<h2 class="enemy_damage player_property" style="left: 10%;"></h2>
			<h2 class="enemy_hp player_property" style="left: 82%;"></h2>
		</div>
		<div class="enemy_img" style="left:90%; top:65%">
			<h2 class="enemy_damage player_property" style="left: 10%;"></h2>
			<h2 class="enemy_hp player_property" style="left: 82%;"></h2>
		</div>	
	</div>
		

	</div>

	<div class="player" style="transition:1s">
		<h1 class="player_name">Игрок</h1>
		<div style="display:flex">
			<div class="player_img" style="left:90%; top:65%">
				<h2 class="player_damage player_property" style="left: 10%;"></h2>
				<h2 class="player_hp player_property" style="left: 82%;"></h2>
			</div>
			<div class="player_img" style="left:90%; top:65%">
				<h2 class="player_damage player_property" style="left: 10%;"></h2>
				<h2 class="player_hp player_property" style="left: 82%;"></h2>
			</div>
		</div>
		

	</div>

	<script type="text/javascript">
	let timer = document.querySelector(".timer");
	let long = 0;

	let enemyS = document.querySelector(".enemy");
	let enemy_hp = document.querySelectorAll(".enemy_hp");
	let enemy_dmg = document.querySelectorAll(".enemy_damage");
	let enemy_img = document.querySelectorAll(".enemy_img");
	let enemy_name = document.querySelector(".enemy_name");

	let playerS = document.querySelector(".player");
	let player_hp = document.querySelectorAll(".player_hp");
	let player_dmg = document.querySelectorAll(".player_damage");
	let player_img = document.querySelectorAll(".player_img");
	let player_name = document.querySelector(".player_name");

	let images = ["url(full-images/1.png)","url(full-images/2.png)","url(full-images/3.png)","url(full-images/4.png)","url(full-images/5.png)","url(full-images/6.png)","url(full-images/7.png)","url(full-images/8.png)","url(full-images/9.png)"]

	let getRandom = function () {
			let n = Math.random()*50;
			n = Math.round(n);
			return n;
		}
	let getRandomIMG = function () {
			let X = Math.random()*8;
			X = Math.round(X);
			return X;
		}

	let enemy = {
		hp: getRandom(),
		dmg: getRandom(),
		name:"игрок",
		img:images[getRandomIMG()],
	}
	let enemy2 = {
		hp: getRandom(),
		dmg: getRandom(),
		name:"игрок",
		img:images[getRandomIMG()],
	}
	let player = {
		hp: getRandom(),
		dmg: getRandom(),
		name:"враг",
		img:images[getRandomIMG()],
	}
	let player2 = {
		hp: getRandom(),
		dmg: getRandom(),
		name:"враг",
		img:images[getRandomIMG()],
	}

	let attack = function () {
	if (player.hp > 0 && enemy.hp > 0) {
		player.hp = player.hp - enemy.dmg;
		player_hp[0].innerHTML = player.hp;
		if (player.hp <= 0) {
			player_img[0].style.opacity = 0;
			
		}
		else {
			enemy.hp = enemy.hp - player.dmg;
			enemy_hp[0].innerHTML = enemy.hp;
			if (enemy.hp <= 0) {
				enemy.dmg = 0;
				enemy_img[0].style.opacity = 0;
				
			};
		};
	};
		if (player2.hp > 0 && enemy2.hp > 0) {
			player2.hp = player2.hp - enemy2.dmg;
			player_hp[1].innerHTML = player2.hp;
		if (player2.hp <= 0) {
			player_img[1].style.opacity = 0;
			
		}
		else {
			enemy2.hp = enemy2.hp - player2.dmg;
			enemy_hp[1].innerHTML = enemy2.hp;
			if (enemy2.hp <= 0) {
				enemy2.dmg = 0;
				enemy_img[1].style.opacity = 0;
				
			};
		};
	};

		if (player2.hp <=0 && player.hp > 0) {
			player_img[0].style.left = 45 + "%";
			if (enemy2.hp <=0 && enemy.hp > 0) {
						enemy_img[0].style.left = 45 + "%";
						player.hp = player.hp - enemy.dmg;
						player_hp[0].innerHTML = player.hp;
						if (player.hp <= 0) {
						player_img[0].style.opacity = 0;
			
						}
						else {
							enemy.hp = enemy.hp - player.dmg;
							enemy_hp[0].innerHTML = enemy.hp;
							if (enemy.hp <= 0) {
								enemy.dmg = 0;
								enemy_img[0].style.opacity = 0;
				
						};
					};
			};
			if (enemy.hp <=0 && enemy2.hp > 0) {
						enemy_img[1].style.left = 45 + "%";
						player.hp = player.hp - enemy2.dmg;
						player_hp[0].innerHTML = player.hp;
						if (player.hp <= 0) {
							player_img[0].style.opacity = 0;
			
						}
						else {
							enemy2.hp = enemy2.hp - player.dmg;
							enemy_hp[1].innerHTML = enemy2.hp;
						if (enemy2.hp <= 0) {
							enemy2.dmg = 0;
							enemy_img[1].style.opacity = 0;
				
						};
					};
			};
		};
		if (player.hp <=0 && player2.hp > 0) {
			player_img[1].style.left = 45 + "%";
			if (enemy2.hp <=0 && enemy.hp > 0) {
				enemy_img[0].style.left = 45 + "%";
				player2.hp = player2.hp - enemy.dmg;
				player_hp[1].innerHTML = player2.hp;
				if (player2.hp <= 0) {
					player_img[1].style.opacity = 0;
			
				}
				else {
					enemy.hp = enemy.hp - player.dmg;
					enemy_hp[0].innerHTML = enemy.hp;
				if (enemy.hp <= 0) {
					enemy.dmg = 0;
					enemy_img[0].style.opacity = 0;
				
					};
				};

			};
			if (enemy.hp <=0 && enemy2.hp > 0) {
				enemy_img[1].style.left = 45 + "%";
				player2.hp = player2.hp - enemy2.dmg;
				player_hp[1].innerHTML = player2.hp;
				if (player2.hp <= 0) {
					player_img[1].style.opacity = 0;
			
				}
				else {
					enemy2.hp = enemy2.hp - player2.dmg;
					enemy_hp[1].innerHTML = enemy2.hp;
				if (enemy2.hp <= 0) {
					enemy2.dmg = 0;
					enemy_img[1].style.opacity = 0;
				
					};
				};
			};
		};

		


		if (player.hp<=0 && player2.hp<=0) {
			player_name.innerHTML = "Игрок проиграл";
		};
		if (enemy.hp<=0 && enemy2.hp<=0) {
			enemy_name.innerHTML = "Враг проиграл";
		};
	}
	let time = function () {

		long = long + 25;
		timer.style.width = long + "%";
		
		};
	let nul = function () {
		long = 0;
		timer.style.width = long + "%";
	}
	enemyS.onclick = function () {
		alert("Атака началась!");
		player_img[0].style.backgroundImage = player.img;
		enemy_img[0].style.backgroundImage = enemy.img;
		player_img[0].style.left = 20 + "%";
		player_img[0].style.top = 60 + "%";

		player_hp[0].innerHTML = player.hp;
		player_dmg[0].innerHTML = player.dmg;

		enemy_hp[0].innerHTML = enemy.hp;
		enemy_dmg[0].innerHTML = enemy.dmg;
		enemy_img[0].style.left = 20 + "%";
		enemy_img[0].style.top = 10 + "%";
		if ((player.hp>0 || enemy.hp>0) && (player2.hp>0 || enemy2.hp>0)) {
			setInterval(attack, 4000);
			setInterval(time, 1000);
			setInterval(nul, 4100);	
		}
		player_img[1].style.backgroundImage = player2.img;
		enemy_img[1].style.backgroundImage = enemy2.img;
		player_img[1].style.left = 70 + "%";
		player_img[1].style.top = 60 + "%";

		player_hp[1].innerHTML = player2.hp;
		player_dmg[1].innerHTML = player2.dmg;

		enemy_hp[1].innerHTML = enemy2.hp;
		enemy_dmg[1].innerHTML = enemy2.dmg;
		enemy_img[1].style.left = 70 + "%";
		enemy_img[1].style.top = 10 + "%";
		
	}
	
	</script>
</body>
</html>
